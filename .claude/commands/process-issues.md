# Process Issues Command

Import and process issue responses from the Google Drive spreadsheet. Shows each response with proposed changes and asks for approval before applying.

## CRITICAL: Always Interactive

**NEVER auto-accept responses.** Always show each response and ask for approval using the AskUserQuestion tool.

## Workflow

### Step 1: Import Responses

```bash
node scripts/import-responses.js
```

This pulls responses from the spreadsheet and marks issues as "answered" in data.json.

### Step 2: Show Each Response

For each answered issue, display:

1. **Issue details:**
   - Issue ID
   - Action Category (ASSIGN, SCHEDULE, ORDER, SPECIFY, TRACK, DECIDE)
   - Title or prompt text
   - Who it was assigned to
   - Related task/material

2. **Response:**
   - The answer provided

3. **Proposed changes:**
   - What fields will be updated
   - Old value → New value

4. **Impact analysis:**
   - Schedule conflicts
   - Dependency issues
   - Warnings

### Step 3: Ask for Approval

For each response, use the AskUserQuestion tool with options:
- **Accept** - Apply the changes
- **Reject** - Mark as rejected, provide reason
- **Skip** - Leave for later

### Step 4: Apply Changes

For accepted responses, apply changes directly by:
1. Reading data.json
2. Finding the related task/material
3. Updating the appropriate fields
4. Saving data.json

### Step 5: Export

After all responses are processed:

```bash
node scripts/export-to-spreadsheet.js && cp projects/kitchen-remodel/Kitchen-Remodel-Tracker.xlsx ~/Google\ Drive/Shared\ drives/White\ Doe\ Inn/Operations/Building\ and\ Maintenance\ /Kitchen\ Remodel/
```

## Action Categories

Issues are categorized by the action needed:

| Category | Action Question | Who |
|----------|-----------------|-----|
| ASSIGN | "What do I need to assign?" | Brandon |
| SCHEDULE | "What do I need to schedule?" | Brandon |
| ORDER | "What's ready to order?" | Tonia |
| SPECIFY | "What needs specs/quantity?" | Tonia |
| TRACK | "What needs delivery tracking?" | Tonia |
| DECIDE | "What decisions are needed?" | Varies |

## Partial Responses

Some issues ask for multiple pieces of information (e.g., "delivery date AND order link").

When a response only provides some information:
1. **Apply what's provided** (e.g., the delivery date)
2. **Keep issue open** for missing fields
3. **Create follow-up issue** if needed for remaining fields

## Issue Statuses

- `open` - Waiting for response in spreadsheet
- `answered` - Response imported, pending review
- `resolved` - Accepted and changes applied
- `dismissed` - User acknowledged but doesn't want action

## Issue Sources

- `manual` - Created manually via CLI
- `auto-lifecycle` - Generated based on task/material state
- `auto-detection` - Generated by detection rules (conflicts, past-due, etc.)

## Data Locations

- Issues in: `projects/kitchen-remodel/data.json` → `issues` array
- Spreadsheet: `~/Google Drive/Shared drives/White Doe Inn/Operations/Building and Maintenance /Kitchen Remodel/Kitchen-Remodel-Tracker.xlsx`

## Related Commands

```bash
npm run task issues                      # List all open issues
npm run task issues --action ASSIGN      # Filter by action category
npm run task issues --assignee tonia     # Filter by assignee
npm run task detect                      # Run auto-detection rules
npm run task dismiss <id>                # Dismiss an auto-detected issue
```

## Error Handling

If import fails:
- Check Google Drive sync status
- Verify spreadsheet exists at expected path
- Check "Issues" sheet (or legacy "Open Questions") has Response column

If parsing fails:
- Show the raw response
- Ask user how to interpret it
- Allow manual entry of values
